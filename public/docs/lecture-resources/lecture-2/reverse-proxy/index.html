<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  ğŸ”€ Reverse Proxies in Microservices
  #


  ğŸ” Forward Proxy vs Reverse Proxy
  #


  
      
          Feature
          Forward Proxy
          Reverse Proxy
      
  
  
      
          Position
          Between client and internet
          Between internet and backend servers
      
      
          Client Awareness
          Configured in client
          Transparent to client
      
      
          Used For
          Anonymity, content filtering, caching
          Load balancing, SSL, routing, caching
      
      
          Hides
          Client
          Server
      
      
          Example Tools
          Squid, TinyProxy
          Nginx, HAProxy, Apache HTTPD
      
  



  ğŸ”„ What is a Reverse Proxy?
  #

A reverse proxy sits in front of one or more backend servers, intercepting requests from clients before they reach the servers. Unlike a forward proxy that acts on behalf of clients, a reverse proxy acts on behalf of servers.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/lecture-resources/lecture-2/reverse-proxy/">
  <meta property="og:site_name" content="Distributed Systems Lab">
  <meta property="og:title" content="Reverse Proxy Implementation">
  <meta property="og:description" content="ğŸ”€ Reverse Proxies in Microservices # ğŸ” Forward Proxy vs Reverse Proxy # Feature Forward Proxy Reverse Proxy Position Between client and internet Between internet and backend servers Client Awareness Configured in client Transparent to client Used For Anonymity, content filtering, caching Load balancing, SSL, routing, caching Hides Client Server Example Tools Squid, TinyProxy Nginx, HAProxy, Apache HTTPD ğŸ”„ What is a Reverse Proxy? # A reverse proxy sits in front of one or more backend servers, intercepting requests from clients before they reach the servers. Unlike a forward proxy that acts on behalf of clients, a reverse proxy acts on behalf of servers.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>Reverse Proxy Implementation | Distributed Systems Lab</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/lecture-resources/lecture-2/reverse-proxy/">
<link rel="stylesheet" href="/book.min.a7616cf2799b58bddffce9438e31fdbfc6393687cfc0950a4a17cd1cce7e35f6.css" integrity="sha256-p2Fs8nmbWL3f/OlDjjH9v8Y5NofPwJUKShfNHM5&#43;NfY=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.e0dbb304318af74ec4c43edd70180030cd9c0dc18d8efec1f7c56aa995d3b104.js" integrity="sha256-4NuzBDGK907ExD7dcBgAMM2cDcGNjv7B98VqqZXTsQQ=" crossorigin="anonymous"></script>

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-T1GNGFG1C4"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-T1GNGFG1C4');
        }
      </script><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Distributed Systems Lab</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/details/" class="">Details</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/timeline/" class="">Course Timeline</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/prerequisites/" class="">Prerequisites</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tools/" class="">Tools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-546b9044c321d8afbf101ab5c84d42f6" class="toggle" checked />
    <label for="section-546b9044c321d8afbf101ab5c84d42f6" class="flex justify-between">
      <a role="button" class="">Lecture Resources</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d7f3f9449785bfbb0af0fb6dbe44c078" class="toggle"  />
    <label for="section-d7f3f9449785bfbb0af0fb6dbe44c078" class="flex justify-between">
      <a role="button" class="">Lecture 1: Introduction</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-1/cs/" class="">Centralized Systems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-1/ds/" class="">Distributed Systems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-1/types-ds/" class="">Types of Distributed Systems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-1/ms/" class="">Microservices</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a7062be986807b90f862fe3e30dfe2c8" class="toggle" checked />
    <label for="section-a7062be986807b90f862fe3e30dfe2c8" class="flex justify-between">
      <a href="/docs/lecture-resources/lecture-2/" class="">Lecture 2: Proxies in Distributed Systems</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-2/proxy/" class="">Proxy Fundamentals</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/lecture-resources/lecture-2/reverse-proxy/" class="active">Reverse Proxy Implementation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-1/" class="">Phase 1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-2/" class="">Phase 2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-3/" class="">Phase 3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-4/" class="">Phase 4</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-5/" class="">Phase 5</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/phase-6/" class="">Phase 6</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/system-design/" class="">Systems Design Problems</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/exploration/" class="">Some Distributed Systems Exploration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/career-path/" class="">Career Path</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/about-me/" class="">About Me</a>
  

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Reverse Proxy Implementation</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#-forward-proxy-vs-reverse-proxy">ğŸ” Forward Proxy vs Reverse Proxy</a></li>
    <li><a href="#-what-is-a-reverse-proxy">ğŸ”„ What is a Reverse Proxy?</a>
      <ul>
        <li><a href="#key-characteristics">Key Characteristics:</a></li>
        <li><a href="#primary-benefits">Primary Benefits:</a></li>
      </ul>
    </li>
    <li><a href="#-why-use-nginx-in-microservices">âš™ï¸ Why Use Nginx in Microservices?</a>
      <ul>
        <li><a href="#-microservices-architecture-with-nginx">ğŸŒ Microservices Architecture with Nginx</a></li>
      </ul>
    </li>
    <li><a href="#-example-nginx-configuration">ğŸ“¦ Example Nginx Configuration</a>
      <ul>
        <li><a href="#basic-configuration">Basic Configuration:</a></li>
        <li><a href="#understanding-the-configuration">Understanding the Configuration:</a></li>
      </ul>
    </li>
    <li><a href="#-architecture-diagram">ğŸ–¼ï¸ Architecture Diagram</a></li>
    <li><a href="#-advanced-nginx-capabilities">ğŸ” Advanced Nginx Capabilities</a>
      <ul>
        <li><a href="#-ssl-termination">âœ… SSL Termination</a></li>
        <li><a href="#-load-balancing">âœ… Load Balancing</a></li>
        <li><a href="#-rate-limiting">âœ… Rate Limiting</a></li>
        <li><a href="#-caching">âœ… Caching</a></li>
      </ul>
    </li>
    <li><a href="#-practical-implementation-steps">ğŸ’» Practical Implementation Steps</a></li>
    <li><a href="#-troubleshooting-common-issues">ğŸ› ï¸ Troubleshooting Common Issues</a>
      <ul>
        <li><a href="#debugging-commands">Debugging Commands:</a></li>
      </ul>
    </li>
    <li><a href="#-key-concepts-to-remember">ğŸ§  Key Concepts to Remember</a></li>
    <li><a href="#-further-learning-resources">ğŸ“š Further Learning Resources</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="-reverse-proxies-in-microservices">
  ğŸ”€ Reverse Proxies in Microservices
  <a class="anchor" href="#-reverse-proxies-in-microservices">#</a>
</h1>
<h2 id="-forward-proxy-vs-reverse-proxy">
  ğŸ” Forward Proxy vs Reverse Proxy
  <a class="anchor" href="#-forward-proxy-vs-reverse-proxy">#</a>
</h2>
<table>
  <thead>
      <tr>
          <th>Feature</th>
          <th>Forward Proxy</th>
          <th>Reverse Proxy</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Position</strong></td>
          <td>Between client and internet</td>
          <td>Between internet and backend servers</td>
      </tr>
      <tr>
          <td><strong>Client Awareness</strong></td>
          <td>Configured in client</td>
          <td>Transparent to client</td>
      </tr>
      <tr>
          <td><strong>Used For</strong></td>
          <td>Anonymity, content filtering, caching</td>
          <td>Load balancing, SSL, routing, caching</td>
      </tr>
      <tr>
          <td><strong>Hides</strong></td>
          <td>Client</td>
          <td>Server</td>
      </tr>
      <tr>
          <td><strong>Example Tools</strong></td>
          <td>Squid, TinyProxy</td>
          <td>Nginx, HAProxy, Apache HTTPD</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-what-is-a-reverse-proxy">
  ğŸ”„ What is a Reverse Proxy?
  <a class="anchor" href="#-what-is-a-reverse-proxy">#</a>
</h2>
<p>A <strong>reverse proxy</strong> sits in front of one or more backend servers, intercepting requests from clients before they reach the servers. Unlike a forward proxy that acts on behalf of clients, a reverse proxy acts on behalf of servers.</p>
<h3 id="key-characteristics">
  Key Characteristics:
  <a class="anchor" href="#key-characteristics">#</a>
</h3>
<ul>
<li><strong>Transparent to clients</strong>: Clients don&rsquo;t need special configuration</li>
<li><strong>Server-side deployment</strong>: Managed by server/infrastructure administrators</li>
<li><strong>Centralized control</strong>: Provides a single entry point to multiple backend services</li>
<li><strong>Enhanced security</strong>: Shields backend servers from direct exposure</li>
</ul>
<h3 id="primary-benefits">
  Primary Benefits:
  <a class="anchor" href="#primary-benefits">#</a>
</h3>
<ol>
<li><strong>Load Balancing</strong>: Distribute traffic across multiple servers</li>
<li><strong>Security</strong>: Hide backend infrastructure and provide WAF capabilities</li>
<li><strong>SSL Termination</strong>: Handle HTTPS encryption/decryption</li>
<li><strong>Caching</strong>: Improve performance by storing common responses</li>
<li><strong>Compression</strong>: Reduce bandwidth usage</li>
<li><strong>Authentication</strong>: Centralize access control</li>
<li><strong>Monitoring</strong>: Unified logging and metrics collection</li>
</ol>
<hr>
<h2 id="-why-use-nginx-in-microservices">
  âš™ï¸ Why Use Nginx in Microservices?
  <a class="anchor" href="#-why-use-nginx-in-microservices">#</a>
</h2>
<p>In a microservice architecture, each service runs on a different port or container. Nginx serves as an ideal reverse proxy because it:</p>
<ul>
<li><strong>Routes requests</strong> to appropriate services based on URL paths</li>
<li><strong>Centralizes access</strong> through a single domain/IP</li>
<li><strong>Provides caching and compression</strong> for improved performance</li>
<li><strong>Enhances security</strong> via rate limiting, SSL, and request filtering</li>
<li><strong>Offers high performance</strong> with low resource consumption</li>
<li><strong>Supports WebSockets</strong> for real-time communication</li>
<li><strong>Enables blue-green deployments</strong> and A/B testing</li>
</ul>
<h3 id="-microservices-architecture-with-nginx">
  ğŸŒ Microservices Architecture with Nginx
  <a class="anchor" href="#-microservices-architecture-with-nginx">#</a>
</h3>
<pre tabindex="0"><code>                                     INTERNET
                                         |
                                         |
                                         â–¼
                                  +-------------+
                                  |             |
                                  |    NGINX    |
                                  |   REVERSE   |
                                  |    PROXY    |
                                  |             |
                                  +------+------+
                                         |
                 +--------------------+--+--+--------------------+
                 |                    |     |                    |
                 â–¼                    â–¼     â–¼                    â–¼
        +----------------+   +----------------+   +----------------+   +----------------+
        |                |   |                |   |                |   |                |
        |  USERS SERVICE |   |  BOOKS SERVICE |   |  LOANS SERVICE |   | STATIC CONTENT |
        |   :5001        |   |   :5002        |   |   :5003        |   |                |
        |                |   |                |   |                |   |                |
        +-------+--------+   +-------+--------+   +-------+--------+   +----------------+
                |                    |                    |
                â–¼                    â–¼                    â–¼
        +----------------+   +----------------+   +----------------+
        |                |   |                |   |                |
        |    USERS DB    |   |    BOOKS DB    |   |    LOANS DB    |
        |                |   |                |   |                |
        +----------------+   +----------------+   +----------------+
</code></pre><hr>
<h2 id="-example-nginx-configuration">
  ğŸ“¦ Example Nginx Configuration
  <a class="anchor" href="#-example-nginx-configuration">#</a>
</h2>
<p>Let&rsquo;s implement a reverse proxy for a microservice architecture with three services:</p>
<ul>
<li><strong>Users API</strong> at <code>http://localhost:5001</code></li>
<li><strong>Books API</strong> at <code>http://localhost:5002</code></li>
<li><strong>Loans API</strong> at <code>http://localhost:5003</code></li>
</ul>
<h3 id="basic-configuration">
  Basic Configuration:
  <a class="anchor" href="#basic-configuration">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># /etc/nginx/nginx.conf or /etc/nginx/conf.d/default.conf
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">library-app.example.com</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Access logging
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">access_log</span> <span style="color:#e6db74">/var/log/nginx/library-app.access.log</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">error_log</span> <span style="color:#e6db74">/var/log/nginx/library-app.error.log</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Users Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/users/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5001/</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Books Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/books/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5002/</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Loans Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/loans/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5003/</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Static content
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/html</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">try_files</span> $uri $uri/ <span style="color:#e6db74">/index.html</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="understanding-the-configuration">
  Understanding the Configuration:
  <a class="anchor" href="#understanding-the-configuration">#</a>
</h3>
<ul>
<li><strong><code>listen 80</code></strong>: Accept HTTP connections on port 80</li>
<li><strong><code>server_name</code></strong>: Domain name for this virtual host</li>
<li><strong><code>location</code></strong>: Route requests based on URL path</li>
<li><strong><code>proxy_pass</code></strong>: Forward requests to backend services</li>
<li><strong><code>proxy_set_header</code></strong>: Pass important headers to backends</li>
</ul>
<hr>
<h2 id="-architecture-diagram">
  ğŸ–¼ï¸ Architecture Diagram
  <a class="anchor" href="#-architecture-diagram">#</a>
</h2>
<pre tabindex="0"><code>                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Client   â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   NGINX     â”‚
                 â”‚ ReverseProxyâ”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼            â–¼            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Users API  â”‚ â”‚ Books API  â”‚ â”‚ Loans API  â”‚
  â”‚  :5001     â”‚ â”‚  :5002     â”‚ â”‚  :5003     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre><hr>
<h2 id="-advanced-nginx-capabilities">
  ğŸ” Advanced Nginx Capabilities
  <a class="anchor" href="#-advanced-nginx-capabilities">#</a>
</h2>
<h3 id="-ssl-termination">
  âœ… SSL Termination
  <a class="anchor" href="#-ssl-termination">#</a>
</h3>
<p>Let Nginx handle HTTPS so backend services don&rsquo;t have to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">listen</span> <span style="color:#ae81ff">443</span> <span style="color:#e6db74">ssl</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server_name</span> <span style="color:#e6db74">library-app.example.com</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ssl_certificate</span>     <span style="color:#e6db74">/etc/ssl/certs/library-app.crt</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ssl_certificate_key</span> <span style="color:#e6db74">/etc/ssl/private/library-app.key</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Modern SSL configuration
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">ssl_protocols</span> <span style="color:#e6db74">TLSv1.2</span> <span style="color:#e6db74">TLSv1.3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ssl_prefer_server_ciphers</span> <span style="color:#66d9ef">on</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ssl_ciphers</span> <span style="color:#e6db74">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># HSTS (optional)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">add_header</span> <span style="color:#e6db74">Strict-Transport-Security</span> <span style="color:#e6db74">&#34;max-age=63072000&#34;</span> <span style="color:#e6db74">always</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5000/</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="-load-balancing">
  âœ… Load Balancing
  <a class="anchor" href="#-load-balancing">#</a>
</h3>
<p>Distribute traffic across multiple instances of the same service:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># Define upstream server groups
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">upstream</span> <span style="color:#e6db74">users_service</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server</span> 10.0.0.1:<span style="color:#ae81ff">5001</span> <span style="color:#e6db74">weight=3</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server</span> 10.0.0.2:<span style="color:#ae81ff">5001</span> <span style="color:#e6db74">weight=1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">server</span> 10.0.0.3:<span style="color:#ae81ff">5001</span> <span style="color:#e6db74">backup</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/users/</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://users_service/</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="-rate-limiting">
  âœ… Rate Limiting
  <a class="anchor" href="#-rate-limiting">#</a>
</h3>
<p>Control excessive requests to sensitive routes:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># Define rate limiting zone
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">limit_req_zone</span> $binary_remote_addr <span style="color:#e6db74">zone=api_limit:10m</span> <span style="color:#e6db74">rate=10r/s</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Apply rate limiting to specific endpoints
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/loans/checkout</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">limit_req</span> <span style="color:#e6db74">zone=api_limit</span> <span style="color:#e6db74">burst=20</span> <span style="color:#e6db74">nodelay</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5003/checkout</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="-caching">
  âœ… Caching
  <a class="anchor" href="#-caching">#</a>
</h3>
<p>Improve performance for static or repeated content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#75715e"># Define cache location and settings
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">proxy_cache_path</span> <span style="color:#e6db74">/var/cache/nginx</span> <span style="color:#e6db74">levels=1:2</span> <span style="color:#e6db74">keys_zone=api_cache:10m</span> <span style="color:#e6db74">max_size=1g</span> <span style="color:#e6db74">inactive=60m</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Apply caching to book catalog (read-heavy, change-infrequent)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">location</span> <span style="color:#e6db74">/api/books/catalog</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_cache</span> <span style="color:#e6db74">api_cache</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_cache_valid</span> <span style="color:#ae81ff">200</span> <span style="color:#ae81ff">10m</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_cache_key</span> $scheme$host$request_uri;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:5002/catalog</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Add cache status header
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#f92672">add_header</span> <span style="color:#e6db74">X-Cache-Status</span> $upstream_cache_status;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="-practical-implementation-steps">
  ğŸ’» Practical Implementation Steps
  <a class="anchor" href="#-practical-implementation-steps">#</a>
</h2>
<ol>
<li>
<p><strong>Install Nginx</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>sudo apt install nginx
</span></span></code></pre></div></li>
<li>
<p><strong>Create Configuration</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/nginx/conf.d/library-app.conf
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Paste your configuration here</span>
</span></span></code></pre></div></li>
<li>
<p><strong>Test Configuration</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nginx -t
</span></span></code></pre></div></li>
<li>
<p><strong>Apply Configuration</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl reload nginx
</span></span></code></pre></div></li>
<li>
<p><strong>Monitor Logs</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tail -f /var/log/nginx/error.log
</span></span></code></pre></div></li>
</ol>
<hr>
<h2 id="-troubleshooting-common-issues">
  ğŸ› ï¸ Troubleshooting Common Issues
  <a class="anchor" href="#-troubleshooting-common-issues">#</a>
</h2>
<table>
  <thead>
      <tr>
          <th>Symptom</th>
          <th>Possible Cause</th>
          <th>Fix</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>502 Bad Gateway</td>
          <td>Backend service not running</td>
          <td>Ensure backend is running and port is correct</td>
      </tr>
      <tr>
          <td>504 Gateway Timeout</td>
          <td>Backend service too slow to respond</td>
          <td>Increase <code>proxy_read_timeout</code> value</td>
      </tr>
      <tr>
          <td>Missing Client IP</td>
          <td>Headers not forwarded properly</td>
          <td>Add proper <code>proxy_set_header</code> directives</td>
      </tr>
      <tr>
          <td>Incorrect Routing</td>
          <td>Path mismatch in proxy_pass</td>
          <td>Check path handling in location blocks</td>
      </tr>
      <tr>
          <td>SSL Certificate Issues</td>
          <td>Certificate misconfiguration</td>
          <td>Verify certificate paths and permissions</td>
      </tr>
      <tr>
          <td>Caching Not Working</td>
          <td>Cache configuration incorrect</td>
          <td>Check cache keys and paths</td>
      </tr>
  </tbody>
</table>
<h3 id="debugging-commands">
  Debugging Commands:
  <a class="anchor" href="#debugging-commands">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Check if Nginx is running</span>
</span></span><span style="display:flex;"><span>systemctl status nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Test configuration syntax</span>
</span></span><span style="display:flex;"><span>nginx -t
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check open ports</span>
</span></span><span style="display:flex;"><span>netstat -tulpn | grep nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Test backend connectivity</span>
</span></span><span style="display:flex;"><span>curl -v http://localhost:5001/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check logs</span>
</span></span><span style="display:flex;"><span>tail -f /var/log/nginx/error.log
</span></span></code></pre></div><hr>
<h2 id="-key-concepts-to-remember">
  ğŸ§  Key Concepts to Remember
  <a class="anchor" href="#-key-concepts-to-remember">#</a>
</h2>
<ul>
<li>Reverse proxies are <strong>server-side</strong> intermediaries that clients connect to directly</li>
<li>They <strong>hide backend infrastructure</strong> from clients</li>
<li>They provide <strong>centralized control</strong> for distributed services</li>
<li><strong>Nginx</strong> excels as a reverse proxy due to its performance and flexibility</li>
<li>Key capabilities include <strong>routing</strong>, <strong>load balancing</strong>, <strong>SSL termination</strong>, and <strong>caching</strong></li>
<li>Proper <strong>header forwarding</strong> is essential for microservices to function correctly</li>
</ul>
<hr>
<h2 id="-further-learning-resources">
  ğŸ“š Further Learning Resources
  <a class="anchor" href="#-further-learning-resources">#</a>
</h2>
<ul>
<li><a href="https://nginx.org/en/docs/">Nginx Official Documentation</a></li>
<li><a href="https://www.nginx.com/resources/library/complete-nginx-cookbook/">Nginx Cookbook</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-load-balancing">Digital Ocean Nginx Configuration Guide</a></li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#-forward-proxy-vs-reverse-proxy">ğŸ” Forward Proxy vs Reverse Proxy</a></li>
    <li><a href="#-what-is-a-reverse-proxy">ğŸ”„ What is a Reverse Proxy?</a>
      <ul>
        <li><a href="#key-characteristics">Key Characteristics:</a></li>
        <li><a href="#primary-benefits">Primary Benefits:</a></li>
      </ul>
    </li>
    <li><a href="#-why-use-nginx-in-microservices">âš™ï¸ Why Use Nginx in Microservices?</a>
      <ul>
        <li><a href="#-microservices-architecture-with-nginx">ğŸŒ Microservices Architecture with Nginx</a></li>
      </ul>
    </li>
    <li><a href="#-example-nginx-configuration">ğŸ“¦ Example Nginx Configuration</a>
      <ul>
        <li><a href="#basic-configuration">Basic Configuration:</a></li>
        <li><a href="#understanding-the-configuration">Understanding the Configuration:</a></li>
      </ul>
    </li>
    <li><a href="#-architecture-diagram">ğŸ–¼ï¸ Architecture Diagram</a></li>
    <li><a href="#-advanced-nginx-capabilities">ğŸ” Advanced Nginx Capabilities</a>
      <ul>
        <li><a href="#-ssl-termination">âœ… SSL Termination</a></li>
        <li><a href="#-load-balancing">âœ… Load Balancing</a></li>
        <li><a href="#-rate-limiting">âœ… Rate Limiting</a></li>
        <li><a href="#-caching">âœ… Caching</a></li>
      </ul>
    </li>
    <li><a href="#-practical-implementation-steps">ğŸ’» Practical Implementation Steps</a></li>
    <li><a href="#-troubleshooting-common-issues">ğŸ› ï¸ Troubleshooting Common Issues</a>
      <ul>
        <li><a href="#debugging-commands">Debugging Commands:</a></li>
      </ul>
    </li>
    <li><a href="#-key-concepts-to-remember">ğŸ§  Key Concepts to Remember</a></li>
    <li><a href="#-further-learning-resources">ğŸ“š Further Learning Resources</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












